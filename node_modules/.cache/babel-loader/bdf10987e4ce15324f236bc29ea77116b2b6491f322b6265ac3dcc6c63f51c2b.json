{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _objectSpread from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/objectSpread2.js\";import _asyncToGenerator from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import _toConsumableArray from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/toConsumableArray.js\";import{connect}from\"react-redux\";import{mapStateToProps,mapDispatchToProps}from\"../../store\";import{playSound,sounds}from\"../../utils/sounds\";import{ToastContainer,toast}from\"react-toastify\";import{useLocation,useNavigate}from\"react-router-dom\";import classnames from\"classnames\";import Stack from\"@mui/material/Stack\";import{Box,Button,ButtonBase,CircularProgress,Typography}from\"@mui/material\";import LinearProgress from\"@mui/material/LinearProgress\";import{useEffect,useState}from\"react\";import{RatingStars}from\"./RateStars\";import{loadQuestions,loadSortedQuestion}from\"../../utils/questions\";import Resaerch from\"./Research\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";import{Fragment as _Fragment}from\"react/jsx-runtime\";var questionTime=120;// 2 minutes\nvar categoriesData=[];function shuffleArrayInChunks(arr,chunkSize){for(var i=0;i<arr.length;i+=chunkSize){// Get the subarray of `chunkSize` elements from the current position\nvar chunk=arr.slice(i,i+chunkSize);// Shuffle the elements in the chunk\nshuffle(chunk);// Replace the original elements with the shuffled elements\narr.splice.apply(arr,[i,chunkSize].concat(_toConsumableArray(chunk)));}}function shuffle(array){for(var i=array.length-1;i>0;i--){var j=Math.floor(Math.random()*(i+1));var _ref=[array[j],array[i]];array[i]=_ref[0];array[j]=_ref[1];}}function RateModal(_ref2){var onSubmit=_ref2.onSubmit;return/*#__PURE__*/_jsxs(Stack,{className:classnames(\"rate-modal\"),children:[/*#__PURE__*/_jsx(Stack,{className:\"rate-modal-blur\"}),/*#__PURE__*/_jsxs(Stack,{className:\"modal\",children:[/*#__PURE__*/_jsx(Typography,{variant:\"h4\",children:\"Question review\"}),/*#__PURE__*/_jsx(RatingStars,{onSubmit:onSubmit})]})]});}function Timer(_ref3){var totalSeconds=_ref3.totalSeconds,onEnd=_ref3.onEnd;var _useState=useState(totalSeconds),_useState2=_slicedToArray(_useState,2),count=_useState2[0],setCount=_useState2[1];useEffect(function(){var intervalId=setInterval(function(){setCount(count-1);if(count<=0){clearInterval(intervalId);onEnd();}},1000);return function(){return clearInterval(intervalId);};},[count,totalSeconds,onEnd]);var minutes=Math.floor(count/60);var seconds=count%60;return/*#__PURE__*/_jsxs(Stack,{direction:\"row\",className:\"timer\",children:[/*#__PURE__*/_jsxs(Typography,{children:[minutes,\":\",seconds.toString().padStart(2,\"0\")]}),/*#__PURE__*/_jsx(\"span\",{className:\"mdi mdi-clock-outline mdi-24px\"})]});}function Play(props){var navigate=useNavigate();var urlSplit=window.location.href.split(\"/\");var questionSet=urlSplit[urlSplit.length-1];var _useState3=useState(0),_useState4=_slicedToArray(_useState3,2),counter=_useState4[0],setCounter=_useState4[1];var _useState5=useState(0),_useState6=_slicedToArray(_useState5,2),userRateCount=_useState6[0],setUserCount=_useState6[1];var _useState7=useState(0),_useState8=_slicedToArray(_useState7,2),globalRateCounter=_useState8[0],setGlobalCounter=_useState8[1];var _useState9=useState([]),_useState10=_slicedToArray(_useState9,2),questions=_useState10[0],setQuestions=_useState10[1];var _useState11=useState(null),_useState12=_slicedToArray(_useState11,2),question=_useState12[0],setQuestion=_useState12[1];var _useState13=useState({}),_useState14=_slicedToArray(_useState13,2),rating=_useState14[0],setRating=_useState14[1];var _useState15=useState(0),_useState16=_slicedToArray(_useState15,2),questionIdx=_useState16[0],setQuestionIdx=_useState16[1];var _useState17=useState(false),_useState18=_slicedToArray(_useState17,2),showRateModal=_useState18[0],setShowRateModal=_useState18[1];var _useState19=useState([]),_useState20=_slicedToArray(_useState19,2),HideIndexes=_useState20[0],setHideIndexes=_useState20[1];var _useState21=useState(questionTime),_useState22=_slicedToArray(_useState21,2),timerSeconds=_useState22[0],setTImerSeconds=_useState22[1];var _useState23=useState(false),_useState24=_slicedToArray(_useState23,2),showResearch=_useState24[0],setShowResearch=_useState24[1];var _useState25=useState({numberOfQuestions:0,numberOfAnsweredQuestions:0,correctAnswers:0,wrongAnswers:0,fiftyFiftyUsed:0,userRate:[],globalRate:[],hintsUsed:0}),_useState26=_slicedToArray(_useState25,2),stats=_useState26[0],setStats=_useState26[1];function QuizName(){var urlSplit=window.location.href.split(\"/\");var questionSet=urlSplit[urlSplit.length-1];switch(questionSet){case\"Python\":return\"Python\";break;case\"Data\":return\"Data Structure \";break;case\"OOP\":return\"OOP\";break;case\"Operation\":return\"Operation Systems\";break;case\"Linux\":return\"Linux\";break;case\"General\":return\"General Questions\";break;return\"Quiz\";}}// const question = questions[questionIdx]\nvar _useState27=useState(true),_useState28=_slicedToArray(_useState27,2),loading=_useState28[0],setLoading=_useState28[1];function loadRating(){return _loadRating.apply(this,arguments);}// The function checks if a research question should be presented to the user\nfunction _loadRating(){_loadRating=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(){var res,payload;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:if(question){_context.next=2;break;}return _context.abrupt(\"return\");case 2:_context.next=4;return props.getRating(question.id);case 4:res=_context.sent;payload=res.payload;setRating(payload!==null&&payload!==void 0?payload:null);setLoading(false);case 8:case\"end\":return _context.stop();}},_callee);}));return _loadRating.apply(this,arguments);}function countUserRate(ratePrecent,globalRate){setCounter(function(counter){return counter+1;});setUserCount(function(userRateCount){return userRateCount+ratePrecent;});setGlobalCounter(function(globalRateCounter){return globalRateCounter+globalRate;});//After 3 questions a check is made if the user rated the questions lower than their overall rating\nif(counter==2){setCounter(function(counter){return 0;});if(userRateCount<globalRateCounter){console.log(\"need return true\",globalRateCounter-userRateCount);setUserCount(function(userRateCount){return 0;});setGlobalCounter(function(globalRateCounter){return 0;});return true;}}return false;}function onRate(_x){return _onRate.apply(this,arguments);}function _onRate(){_onRate=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(rate){var _ref4;var userRate,ratesCount,ratesSum,newRate,ratePercent,globalRatePercent,res,_res;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:userRate=(_ref4=_toConsumableArray(props.rate.userRate))!==null&&_ref4!==void 0?_ref4:[];userRate.push({rate:rate,userEmail:props.user.email});ratesCount=props.rate.ratesCount;ratesSum=props.rate.ratesSum;console.log(\"rate =>\",rate);console.log(\"ratesCount =>\",ratesCount);console.log(\"ratesSum =>\",ratesSum);console.log(\"newRatesCount: \".concat(ratesCount?ratesCount+1:1));newRate={questionId:question.id,userRate:userRate,ratesCount:ratesCount?ratesCount+1:1,ratesSum:ratesSum?ratesSum+rate:rate};console.log(\"newRate => \",newRate);// Check motivation\nratePercent=rate/5*100;stats.userRate.push(ratePercent);globalRatePercent=props.rate.ratesSum/(props.rate.ratesCount*5)*100;stats.globalRate.push(globalRatePercent);setTimeout(function(){// RateStars has some bug that prepregate the event so it fix it\nsetShowRateModal(false);},100);//if (ratePercent && globalRatePercent && ratePercent < globalRatePercent) {\nif(countUserRate(ratePercent,globalRatePercent)){setShowResearch(true);}if(!(ratesCount!==null&&ratesSum)){_context2.next=22;break;}_context2.next=19;return props.updateRating(newRate);case 19:res=_context2.sent;_context2.next=25;break;case 22:_context2.next=24;return props.addRating(newRate);case 24:_res=_context2.sent;case 25:case\"end\":return _context2.stop();}},_callee2);}));return _onRate.apply(this,arguments);}function loadSortedQuestions(){return _loadSortedQuestions.apply(this,arguments);}function _loadSortedQuestions(){_loadSortedQuestions=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee4(){var questions,ratings;return _regeneratorRuntime().wrap(function _callee4$(_context4){while(1)switch(_context4.prev=_context4.next){case 0:questions=loadQuestions(questionSet);_context4.next=3;return Promise.all(questions.map(/*#__PURE__*/function(){var _ref5=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee3(q){var id,res,payload,ratesCount,ratesSum,ratePercent;return _regeneratorRuntime().wrap(function _callee3$(_context3){while(1)switch(_context3.prev=_context3.next){case 0:id=q.id;_context3.next=3;return props.getRating(id);case 3:res=_context3.sent;payload=res.payload;ratesCount=(payload===null||payload===void 0?void 0:payload.ratesCount)||0;ratesSum=(payload===null||payload===void 0?void 0:payload.ratesSum)||0;ratePercent=ratesSum<=0?0:ratesSum/(ratesCount*5)*100;return _context3.abrupt(\"return\",{ratePercent:ratePercent,id:id});case 9:case\"end\":return _context3.stop();}},_callee3);}));return function(_x2){return _ref5.apply(this,arguments);};}()));case 3:ratings=_context4.sent;questions.sort(function(a,b){var _ratings$find,_ratings$find2;var ratingA=((_ratings$find=ratings.find(function(r){return r.id===a.id;}))===null||_ratings$find===void 0?void 0:_ratings$find.ratePercent)||0;var ratingB=((_ratings$find2=ratings.find(function(r){return r.id===b.id;}))===null||_ratings$find2===void 0?void 0:_ratings$find2.ratePercent)||0;return ratingB-ratingA;});shuffleArrayInChunks(questions,10);return _context4.abrupt(\"return\",questions);case 7:case\"end\":return _context4.stop();}},_callee4);}));return _loadSortedQuestions.apply(this,arguments);}function init(){return _init.apply(this,arguments);}function _init(){_init=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee5(){var data,questions;return _regeneratorRuntime().wrap(function _callee5$(_context5){while(1)switch(_context5.prev=_context5.next){case 0:data=JSON.parse(localStorage.getItem(\"user\"));props.getUser(data);_context5.next=4;return loadSortedQuestions();case 4:questions=_context5.sent;setStats(function(prev){return _objectSpread(_objectSpread({},prev),{},{numberOfQuestions:questions.length});});setQuestions(questions);setQuestion(questions[questionIdx]);setLoading(false);console.log(\"questions =>\",questions);case 10:case\"end\":return _context5.stop();}},_callee5);}));return _init.apply(this,arguments);}useEffect(function(){init();},[]);useEffect(function(){console.log(\"stats => \",stats);loadRating();setHideIndexes([]);},[questionIdx]);function onAnswer(result){if(result){// Correct\nsetStats(function(prev){return _objectSpread(_objectSpread({},prev),{},{correctAnswers:prev.correctAnswers+1});});playSound(sounds.correctNotification);toast.success(\"Correct!\",{autoClose:350,pauseOnHover:false});}else{// wrong\nsetStats(function(prev){return _objectSpread(_objectSpread({},prev),{},{wrongAnswers:prev.wrongAnswers+1});});playSound(sounds.wrongNotification);toast.error(\"Wrong answer\",{autoClose:350,pauseOnHover:false});}setStats(function(prev){return _objectSpread(_objectSpread({},prev),{},{numberOfAnsweredQuestions:prev.numberOfAnsweredQuestions+1});});if(questions.length>0&&questionIdx+1>=questions.length){// end game\nendGame(_objectSpread(_objectSpread({},stats),{},{numberOfAnsweredQuestions:stats.numberOfAnsweredQuestions+1}));return;}setQuestionIdx(questionIdx+1);setQuestion(questions[questionIdx+1]);props.getRating(question.id);setShowRateModal(true);}function endGame(stats){navigate(\"/play/quizSummary\",{//state: { ...stats, category: questionSet },\nstate:_objectSpread(_objectSpread({},stats),{},{category:QuizName()})});}useEffect(function(){// check scores\n// if (questions.length > 0 && (questionIdx + 1 >= questions.length)) { // end\n//     endGame()\n// }\n},[stats]);function onPrev(){playSound(sounds.buttonSound);setQuestionIdx(questionIdx-1);setQuestion(questions[questionIdx-1]);}function onNext(){playSound(sounds.buttonSound);setQuestionIdx(questionIdx+1);setQuestion(questions[questionIdx+1]);}function onQuit(){playSound(sounds.buttonSound);endGame(stats);}function calcScore(){return parseInt(stats.correctAnswers/stats.numberOfQuestions*100);}function enableHint(n){var answer=questions[questionIdx].answer;var answerIdx=questions.findIndex(function(q){return q.answer===answer;});var wrongIdxs=[\"A\",\"B\",\"C\",\"D\"].map(function(c,i){var option=question[\"option\".concat(c)];return option&&answer!==option?i:-1;}).filter(function(i){return i>-1;});setHideIndexes(wrongIdxs.slice(0,n));}console.log(\"props.rate => \",props.rate);if(loading){return/*#__PURE__*/_jsxs(_Fragment,{children:[/*#__PURE__*/_jsx(Stack,{justifyContent:\"center\",alignItems:\"center\",sx:{width:\"100vw\",height:\"100vh\",background:\"none\",position:\"absolute\"},children:/*#__PURE__*/_jsx(CircularProgress,{size:\"5em\",sx:{color:\"#54b5df\"}})}),/*#__PURE__*/_jsx(Stack,{className:classnames(\"bg-blur\")})]});}return/*#__PURE__*/_jsxs(_Fragment,{children:[showRateModal&&/*#__PURE__*/_jsx(RateModal,{onSubmit:onRate}),showResearch&&/*#__PURE__*/_jsx(Resaerch,{onFinish:function onFinish(){return setShowResearch(false);}}),/*#__PURE__*/_jsx(Stack,{className:classnames(\"bg-blur\")}),/*#__PURE__*/_jsxs(Stack,{className:classnames(\"play\"),children:[/*#__PURE__*/_jsx(ToastContainer,{}),/*#__PURE__*/_jsxs(Stack,{className:classnames(\"game\"),children:[/*#__PURE__*/_jsx(Typography,{className:classnames(\"title\"),variant:\"h3\",textAlign:\"center\",children:QuizName()}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",className:classnames(\"hints\"),children:[/*#__PURE__*/_jsx(ButtonBase,{onClick:function onClick(){setStats(function(prev){return _objectSpread(_objectSpread({},prev),{},{hintsUsed:prev.hintsUsed+1});});enableHint(1);},className:\"mdi mdi-lightbulb-on-outline mdi-24px lifeline-icon\",component:\"span\"}),/*#__PURE__*/_jsxs(Stack,{direction:\"column\",className:classnames(\"info\"),children:[/*#__PURE__*/_jsxs(Typography,{children:[questionIdx+1,\" of \",questions.length]}),/*#__PURE__*/_jsx(\"div\",{style:{width:\"100%\",height:\"100px\"},children:/*#__PURE__*/_jsx(LinearProgress,{variant:\"determinate\",value:(questionIdx+1)/questions.length*100,style:{height:\"10px\",width:\"250px\",margin:\"auto\"}})}),/*#__PURE__*/_jsxs(Typography,{variant:\"h6\",children:[\"Score: \",calcScore()]})]}),/*#__PURE__*/_jsx(ButtonBase,{onClick:function onClick(){setStats(function(prev){return _objectSpread(_objectSpread({},prev),{},{fiftyFiftyUsed:prev.fiftyFiftyUsed+1});});enableHint(2);},className:\"mdi mdi-set-center mdi-24px lifeline-icon\",component:\"span\"})]}),/*#__PURE__*/_jsx(Typography,{variant:\"h6\",className:classnames(\"question\"),children:question.question}),/*#__PURE__*/_jsx(\"div\",{className:\"answers-container\",children:/*#__PURE__*/_jsx(\"div\",{className:classnames(\"answers\"),children:[\"A\",\"B\",\"C\",\"D\"].map(function(c,i){if(HideIndexes.includes(i))return;var option=question[\"option\".concat(c)];if(!option)return;// don't render\nreturn/*#__PURE__*/_jsx(Stack,{className:classnames(\"answer\"),children:/*#__PURE__*/_jsx(ButtonBase,{onClick:function onClick(){onAnswer(option===question.answer);},className:classnames(\"answer-content\"),children:/*#__PURE__*/_jsx(Typography,{className:classnames(\"answer-text\"),children:option})})},c);})})}),/*#__PURE__*/_jsxs(Stack,{direction:\"row\",className:classnames(\"controls\"),children:[/*#__PURE__*/_jsx(Button,{sx:{\"&.MuiButton-contained.Mui-disabled\":{background:\"gray\",opacity:0.5}},onClick:onPrev,disabled:questionIdx===0,className:classnames(\"prev-btn\"),variant:\"contained\",children:\"Previous\"}),/*#__PURE__*/_jsx(Button,{sx:{\"&.MuiButton-contained.Mui-disabled\":{background:\"gray\",opacity:0.5}},onClick:onNext,disabled:questionIdx===questions.length-1,variant:\"contained\",children:\"Next\"}),/*#__PURE__*/_jsx(Button,{onClick:onQuit,variant:\"contained\",children:\"Quit\"})]})]})]})]});}export default connect(mapStateToProps,mapDispatchToProps)(Play);","map":{"version":3,"names":["connect","mapStateToProps","mapDispatchToProps","playSound","sounds","ToastContainer","toast","useLocation","useNavigate","classnames","Stack","Box","Button","ButtonBase","CircularProgress","Typography","LinearProgress","useEffect","useState","RatingStars","loadQuestions","loadSortedQuestion","Resaerch","questionTime","categoriesData","shuffleArrayInChunks","arr","chunkSize","i","length","chunk","slice","shuffle","splice","array","j","Math","floor","random","RateModal","onSubmit","Timer","totalSeconds","onEnd","count","setCount","intervalId","setInterval","clearInterval","minutes","seconds","toString","padStart","Play","props","navigate","urlSplit","window","location","href","split","questionSet","counter","setCounter","userRateCount","setUserCount","globalRateCounter","setGlobalCounter","questions","setQuestions","question","setQuestion","rating","setRating","questionIdx","setQuestionIdx","showRateModal","setShowRateModal","HideIndexes","setHideIndexes","timerSeconds","setTImerSeconds","showResearch","setShowResearch","numberOfQuestions","numberOfAnsweredQuestions","correctAnswers","wrongAnswers","fiftyFiftyUsed","userRate","globalRate","hintsUsed","stats","setStats","QuizName","loading","setLoading","loadRating","getRating","id","res","payload","countUserRate","ratePrecent","console","log","onRate","rate","push","userEmail","user","email","ratesCount","ratesSum","newRate","questionId","ratePercent","globalRatePercent","setTimeout","updateRating","addRating","loadSortedQuestions","Promise","all","map","q","ratings","sort","a","b","ratingA","find","r","ratingB","init","data","JSON","parse","localStorage","getItem","getUser","prev","onAnswer","result","correctNotification","success","autoClose","pauseOnHover","wrongNotification","error","endGame","state","category","onPrev","buttonSound","onNext","onQuit","calcScore","parseInt","enableHint","n","answer","answerIdx","findIndex","wrongIdxs","c","option","filter","width","height","background","position","color","margin","includes","opacity"],"sources":["C:/Users/liranhaim/Desktop/MotoProg_H/src/components/quiz/Play.js"],"sourcesContent":["import { connect } from \"react-redux\";\nimport { mapStateToProps, mapDispatchToProps } from \"../../store\";\nimport { playSound, sounds } from \"../../utils/sounds\";\nimport { ToastContainer, toast } from \"react-toastify\";\nimport { useLocation, useNavigate } from \"react-router-dom\";\nimport classnames from \"classnames\";\n\nimport Stack from \"@mui/material/Stack\";\nimport {\n  Box,\n  Button,\n  ButtonBase,\n  CircularProgress,\n  Typography,\n} from \"@mui/material\";\nimport LinearProgress from \"@mui/material/LinearProgress\";\nimport { useEffect, useState } from \"react\";\nimport { RatingStars } from \"./RateStars\";\n\nimport { loadQuestions, loadSortedQuestion } from \"../../utils/questions\";\nimport Resaerch from \"./Research\";\n\nconst questionTime = 120; // 2 minutes\nconst categoriesData = [];\n\nfunction shuffleArrayInChunks(arr, chunkSize) {\n  for (let i = 0; i < arr.length; i += chunkSize) {\n    // Get the subarray of `chunkSize` elements from the current position\n    const chunk = arr.slice(i, i + chunkSize);\n    // Shuffle the elements in the chunk\n    shuffle(chunk);\n    // Replace the original elements with the shuffled elements\n    arr.splice(i, chunkSize, ...chunk);\n  }\n}\n\nfunction shuffle(array) {\n  for (let i = array.length - 1; i > 0; i--) {\n    const j = Math.floor(Math.random() * (i + 1));\n    [array[i], array[j]] = [array[j], array[i]];\n  }\n}\n\nfunction RateModal({ onSubmit }) {\n  return (\n    <Stack className={classnames(\"rate-modal\")}>\n      <Stack className=\"rate-modal-blur\" />\n      <Stack className=\"modal\">\n        <Typography variant=\"h4\">Question review</Typography>\n        <RatingStars onSubmit={onSubmit} />\n      </Stack>\n    </Stack>\n  );\n}\n\nfunction Timer({ totalSeconds, onEnd }) {\n  const [count, setCount] = useState(totalSeconds);\n  useEffect(() => {\n    const intervalId = setInterval(() => {\n      setCount(count - 1);\n      if (count <= 0) {\n        clearInterval(intervalId);\n        onEnd();\n      }\n    }, 1000);\n    return () => clearInterval(intervalId);\n  }, [count, totalSeconds, onEnd]);\n\n  const minutes = Math.floor(count / 60);\n  const seconds = count % 60;\n\n  return (\n    <Stack direction=\"row\" className=\"timer\">\n      <Typography>\n        {minutes}:{seconds.toString().padStart(2, \"0\")}\n      </Typography>\n      <span className=\"mdi mdi-clock-outline mdi-24px\" />\n    </Stack>\n  );\n}\n\nfunction Play(props) {\n  const navigate = useNavigate();\n  const urlSplit = window.location.href.split(\"/\");\n  const questionSet = urlSplit[urlSplit.length - 1];\n\n  const [counter, setCounter] = useState(0);\n  const [userRateCount, setUserCount] = useState(0);\n  const [globalRateCounter, setGlobalCounter] = useState(0);\n  const [questions, setQuestions] = useState([]);\n  const [question, setQuestion] = useState(null);\n  const [rating, setRating] = useState({});\n\n  const [questionIdx, setQuestionIdx] = useState(0);\n  const [showRateModal, setShowRateModal] = useState(false);\n  const [HideIndexes, setHideIndexes] = useState([]);\n  const [timerSeconds, setTImerSeconds] = useState(questionTime);\n  const [showResearch, setShowResearch] = useState(false);\n  const [stats, setStats] = useState({\n    numberOfQuestions: 0,\n    numberOfAnsweredQuestions: 0,\n    correctAnswers: 0,\n    wrongAnswers: 0,\n    fiftyFiftyUsed: 0,\n    userRate: [],\n    globalRate: [],\n    hintsUsed: 0,\n  });\n\n  function QuizName() {\n    const urlSplit = window.location.href.split(\"/\");\n    const questionSet = urlSplit[urlSplit.length - 1];\n    switch (questionSet) {\n      case \"Python\":\n        return \"Python\";\n        break;\n      case \"Data\":\n        return \"Data Structure \";\n        break;\n      case \"OOP\":\n        return \"OOP\";\n        break;\n      case \"Operation\":\n        return \"Operation Systems\";\n        break;\n      case \"Linux\":\n        return \"Linux\";\n        break;\n      case \"General\":\n        return \"General Questions\";\n        break;\n        return \"Quiz\";\n    }\n  }\n\n  // const question = questions[questionIdx]\n  const [loading, setLoading] = useState(true);\n\n  async function loadRating() {\n    if (!question) return;\n    const res = await props.getRating(question.id);\n    const payload = res.payload;\n    setRating(payload ?? null);\n    setLoading(false);\n  }\n  // The function checks if a research question should be presented to the user\n  function countUserRate(ratePrecent, globalRate) {\n    setCounter((counter) => counter + 1);\n    setUserCount((userRateCount) => userRateCount + ratePrecent);\n    setGlobalCounter((globalRateCounter) => globalRateCounter + globalRate);\n\n    //After 3 questions a check is made if the user rated the questions lower than their overall rating\n    if (counter == 2) {\n      setCounter((counter) => 0);\n      if (userRateCount < globalRateCounter) {\n        console.log(`need return true`, globalRateCounter - userRateCount);\n        setUserCount((userRateCount) => 0);\n        setGlobalCounter((globalRateCounter) => 0);\n        return true;\n      }\n    }\n    return false;\n  }\n  async function onRate(rate) {\n    const userRate = [...props.rate.userRate] ?? [];\n    userRate.push({\n      rate: rate,\n      userEmail: props.user.email,\n    });\n    const ratesCount = props.rate.ratesCount;\n    const ratesSum = props.rate.ratesSum;\n    console.log(`rate =>`, rate);\n    console.log(\"ratesCount =>\", ratesCount);\n    console.log(\"ratesSum =>\", ratesSum);\n    console.log(`newRatesCount: ${ratesCount ? ratesCount + 1 : 1}`);\n\n    const newRate = {\n      questionId: question.id,\n      userRate: userRate,\n      ratesCount: ratesCount ? ratesCount + 1 : 1,\n      ratesSum: ratesSum ? ratesSum + rate : rate,\n    };\n    console.log(\"newRate => \", newRate);\n\n    // Check motivation\n    const ratePercent = (rate / 5) * 100;\n    stats.userRate.push(ratePercent);\n    const globalRatePercent =\n      (props.rate.ratesSum / (props.rate.ratesCount * 5)) * 100;\n    stats.globalRate.push(globalRatePercent);\n\n    setTimeout(() => {\n      // RateStars has some bug that prepregate the event so it fix it\n      setShowRateModal(false);\n    }, 100);\n\n    //if (ratePercent && globalRatePercent && ratePercent < globalRatePercent) {\n    if (countUserRate(ratePercent, globalRatePercent)) {\n      setShowResearch(true);\n    }\n    if (ratesCount !== null && ratesSum) {\n      // update\n      const res = await props.updateRating(newRate);\n    } else {\n      // create\n      const res = await props.addRating(newRate);\n    }\n  }\n\n  async function loadSortedQuestions() {\n    const questions = loadQuestions(questionSet);\n    const ratings = await Promise.all(\n      questions.map(async (q) => {\n        const id = q.id;\n        const res = await props.getRating(id);\n        const payload = res.payload;\n        const ratesCount = payload?.ratesCount || 0;\n        const ratesSum = payload?.ratesSum || 0;\n\n        const ratePercent =\n          ratesSum <= 0 ? 0 : (ratesSum / (ratesCount * 5)) * 100;\n        return { ratePercent: ratePercent, id: id };\n      })\n    );\n    questions.sort((a, b) => {\n      const ratingA = ratings.find((r) => r.id === a.id)?.ratePercent || 0;\n      const ratingB = ratings.find((r) => r.id === b.id)?.ratePercent || 0;\n      return ratingB - ratingA;\n    });\n    shuffleArrayInChunks(questions, 10);\n    return questions;\n  }\n\n  async function init() {\n    const data = JSON.parse(localStorage.getItem(\"user\"));\n    props.getUser(data);\n    const questions = await loadSortedQuestions();\n    setStats((prev) => ({ ...prev, numberOfQuestions: questions.length }));\n    setQuestions(questions);\n    setQuestion(questions[questionIdx]);\n    setLoading(false);\n    console.log(`questions =>`, questions);\n  }\n  useEffect(() => {\n    init();\n  }, []);\n\n  useEffect(() => {\n    console.log(\"stats => \", stats);\n    loadRating();\n    setHideIndexes([]);\n  }, [questionIdx]);\n\n  function onAnswer(result) {\n    if (result) {\n      // Correct\n      setStats((prev) => ({\n        ...prev,\n        correctAnswers: prev.correctAnswers + 1,\n      }));\n      playSound(sounds.correctNotification);\n      toast.success(\"Correct!\", { autoClose: 350, pauseOnHover: false });\n    } else {\n      // wrong\n      setStats((prev) => ({ ...prev, wrongAnswers: prev.wrongAnswers + 1 }));\n      playSound(sounds.wrongNotification);\n      toast.error(\"Wrong answer\", { autoClose: 350, pauseOnHover: false });\n    }\n\n    setStats((prev) => ({\n      ...prev,\n      numberOfAnsweredQuestions: prev.numberOfAnsweredQuestions + 1,\n    }));\n\n    if (questions.length > 0 && questionIdx + 1 >= questions.length) {\n      // end game\n      endGame({\n        ...stats,\n        numberOfAnsweredQuestions: stats.numberOfAnsweredQuestions + 1,\n      });\n      return;\n    }\n    setQuestionIdx(questionIdx + 1);\n    setQuestion(questions[questionIdx + 1]);\n    props.getRating(question.id);\n    setShowRateModal(true);\n  }\n\n  function endGame(stats) {\n    navigate(\"/play/quizSummary\", {\n      //state: { ...stats, category: questionSet },\n      state: { ...stats, category: QuizName()  },\n    });\n  }\n\n  useEffect(() => {\n    // check scores\n    // if (questions.length > 0 && (questionIdx + 1 >= questions.length)) { // end\n    //     endGame()\n    // }\n  }, [stats]);\n\n  function onPrev() {\n    playSound(sounds.buttonSound);\n    setQuestionIdx(questionIdx - 1);\n    setQuestion(questions[questionIdx - 1]);\n  }\n  function onNext() {\n    playSound(sounds.buttonSound);\n    setQuestionIdx(questionIdx + 1);\n    setQuestion(questions[questionIdx + 1]);\n  }\n\n  function onQuit() {\n    playSound(sounds.buttonSound);\n    endGame(stats);\n  }\n\n  function calcScore() {\n    return parseInt((stats.correctAnswers / stats.numberOfQuestions) * 100);\n  }\n\n  function enableHint(n) {\n    const answer = questions[questionIdx].answer;\n    const answerIdx = questions.findIndex((q) => q.answer === answer);\n    const wrongIdxs = [\"A\", \"B\", \"C\", \"D\"]\n      .map((c, i) => {\n        const option = question[`option${c}`];\n        return option && answer !== option ? i : -1;\n      })\n      .filter((i) => i > -1);\n    setHideIndexes(wrongIdxs.slice(0, n));\n  }\n\n  console.log(\"props.rate => \", props.rate);\n\n  if (loading) {\n    return (\n      <>\n        <Stack\n          justifyContent=\"center\"\n          alignItems=\"center\"\n          sx={{\n            width: \"100vw\",\n            height: \"100vh\",\n            background: \"none\",\n            position: \"absolute\",\n          }}\n        >\n          <CircularProgress size=\"5em\" sx={{ color: \"#54b5df\" }} />\n        </Stack>\n\n        <Stack className={classnames(\"bg-blur\")}></Stack>\n      </>\n    );\n  }\n\n  return (\n    <>\n      {showRateModal && <RateModal onSubmit={onRate} />}\n      {showResearch && <Resaerch onFinish={() => setShowResearch(false)} />}\n      <Stack className={classnames(\"bg-blur\")} />\n      <Stack className={classnames(\"play\")}>\n        <ToastContainer />\n        <Stack className={classnames(\"game\")}>\n          <Typography\n            className={classnames(\"title\")}\n            variant=\"h3\"\n            textAlign=\"center\"\n          >\n            {QuizName()}\n          </Typography>\n\n          <Stack direction=\"row\" className={classnames(\"hints\")}>\n            <ButtonBase\n              onClick={() => {\n                setStats((prev) => ({\n                  ...prev,\n                  hintsUsed: prev.hintsUsed + 1,\n                }));\n                enableHint(1);\n              }}\n              className=\"mdi mdi-lightbulb-on-outline mdi-24px lifeline-icon\"\n              component=\"span\"\n            />\n            <Stack direction=\"column\" className={classnames(\"info\")}>\n              <Typography>\n                {questionIdx + 1} of {questions.length}\n              </Typography>\n              <div style={{ width: \"100%\", height: \"100px\" }}>\n                <LinearProgress\n                  variant=\"determinate\"\n                  value={((questionIdx + 1) / questions.length) * 100}\n                  style={{ height: \"10px\", width: \"250px\", margin: \"auto\" }}\n                />\n              </div>\n              <Typography variant=\"h6\">Score: {calcScore()}</Typography>\n              {/* <Timer onEnd={() => { }} totalSeconds={timerSeconds} /> */}\n            </Stack>\n            <ButtonBase\n              onClick={() => {\n                setStats((prev) => ({\n                  ...prev,\n                  fiftyFiftyUsed: prev.fiftyFiftyUsed + 1,\n                }));\n                enableHint(2);\n              }}\n              className=\"mdi mdi-set-center mdi-24px lifeline-icon\"\n              component=\"span\"\n            />\n          </Stack>\n          <Typography variant=\"h6\" className={classnames(\"question\")}>\n            {question.question}\n          </Typography>\n          <div className=\"answers-container\">\n            <div className={classnames(\"answers\")}>\n              {[\"A\", \"B\", \"C\", \"D\"].map((c, i) => {\n                if (HideIndexes.includes(i)) return;\n                const option = question[`option${c}`];\n                if (!option) return; // don't render\n                return (\n                  <Stack key={c} className={classnames(\"answer\")}>\n                    <ButtonBase\n                      onClick={() => {\n                        onAnswer(option === question.answer);\n                      }}\n                      className={classnames(\"answer-content\")}\n                    >\n                      <Typography className={classnames(\"answer-text\")}>\n                        {option}\n                      </Typography>\n                    </ButtonBase>\n                  </Stack>\n                );\n              })}\n            </div>\n          </div>\n          <Stack direction=\"row\" className={classnames(\"controls\")}>\n            <Button\n              sx={{\n                \"&.MuiButton-contained.Mui-disabled\": {\n                  background: \"gray\",\n                  opacity: 0.5,\n                },\n              }}\n              onClick={onPrev}\n              disabled={questionIdx === 0}\n              className={classnames(\"prev-btn\")}\n              variant=\"contained\"\n            >\n              Previous\n            </Button>\n            <Button\n              sx={{\n                \"&.MuiButton-contained.Mui-disabled\": {\n                  background: \"gray\",\n                  opacity: 0.5,\n                },\n              }}\n              onClick={onNext}\n              disabled={questionIdx === questions.length - 1}\n              variant=\"contained\"\n            >\n              Next\n            </Button>\n            <Button onClick={onQuit} variant=\"contained\">\n              Quit\n            </Button>\n          </Stack>\n        </Stack>\n      </Stack>\n    </>\n  );\n}\n\nexport default connect(mapStateToProps, mapDispatchToProps)(Play);\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}