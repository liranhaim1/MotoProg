{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import _slicedToArray from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/slicedToArray.js\";import React,{useState}from\"react\";import{NavLink,Redirect,useNavigate}from\"react-router-dom\";import{createUserWithEmailAndPassword}from\"firebase/auth\";import{auth}from\"../../firebase\";import{addUser}from\"../../features/users\";import{useDispatch}from\"react-redux\";import{jsx as _jsx}from\"react/jsx-runtime\";import{jsxs as _jsxs}from\"react/jsx-runtime\";var Signup=function Signup(props){var _useState=useState(\"\"),_useState2=_slicedToArray(_useState,2),email=_useState2[0],setEmail=_useState2[1];var _useState3=useState(\"\"),_useState4=_slicedToArray(_useState3,2),password=_useState4[0],setPassword=_useState4[1];var _useState5=useState({}),_useState6=_slicedToArray(_useState5,2),error=_useState6[0],setError=_useState6[1];var navigate=useNavigate();var dispatch=useDispatch();var onSubmit=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(e){return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:e.preventDefault();_context.next=3;return createUserWithEmailAndPassword(auth,email,password).then(function(userCredential){// Signed in\nvar user=userCredential.user;console.log(user);// Redirect(\"/login\")\nnavigate(\"/\");localStorage.setItem('user',JSON.stringify({id:userCredential.user.uid,email:email,ids:[]}));// ...\ndispatch(addUser({email:email,uid:userCredential.user.uid}));}).catch(function(err){var errorCode=err.code;var errorMessage=err.message;if(errorMessage===\"Firebase: Error (auth/email-already-in-use).\"){setError({email:\"This email is already exist\"});}else if(errorMessage===\"Firebase: Password should be at least 6 characters (auth/weak-password).\"){setError({password:\"Password should be at least 6 characters\"});}console.log(errorMessage);// ..\n});case 3:case\"end\":return _context.stop();}},_callee);}));return function onSubmit(_x){return _ref.apply(this,arguments);};}();var onBack=function onBack(e){e.preventDefault();navigate(\"/\");};return/*#__PURE__*/_jsxs(\"main\",{className:\"auth\",children:[/*#__PURE__*/_jsx(\"div\",{className:\"bg-blur\"}),/*#__PURE__*/_jsxs(\"section\",{children:[/*#__PURE__*/_jsx(\"div\",{style:{textAlign:\"center\"},children:/*#__PURE__*/_jsx(\"span\",{className:\"mdi mdi-cube-outline cube\"})}),/*#__PURE__*/_jsxs(\"div\",{children:[/*#__PURE__*/_jsx(\"h1\",{children:\"Sign up\"}),/*#__PURE__*/_jsxs(\"form\",{onSubmit:onSubmit,children:[/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-form\",type:\"email\",label:\"Email address\",value:email,onChange:function onChange(e){return setEmail(e.target.value);},required:true,placeholder:\"Email address\"})}),error.email?/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error.email}):null,/*#__PURE__*/_jsx(\"div\",{className:\"input-container\",children:/*#__PURE__*/_jsx(\"input\",{className:\"input-form\",type:\"password\",label:\"Create password\",value:password,onChange:function onChange(e){return setPassword(e.target.value);},required:true,placeholder:\"Password\"})}),error.password?/*#__PURE__*/_jsx(\"p\",{className:\"error\",children:error.password}):null,/*#__PURE__*/_jsx(\"div\",{className:\"submit\",children:/*#__PURE__*/_jsx(\"button\",{type:\"submit\",className:\"submit-button\",children:\"Sign up\"})})]}),/*#__PURE__*/_jsxs(\"p\",{className:\"text-white text-center\",children:[\"Already have an account? \",/*#__PURE__*/_jsx(NavLink,{to:\"/login\",children:\"Sign in\"})]}),/*#__PURE__*/_jsx(\"p\",{className:\"back\",onClick:onBack,children:\"Back\"})]})]})]});};export default Signup;","map":{"version":3,"names":["React","useState","NavLink","Redirect","useNavigate","createUserWithEmailAndPassword","auth","addUser","useDispatch","Signup","props","email","setEmail","password","setPassword","error","setError","navigate","dispatch","onSubmit","e","preventDefault","then","userCredential","user","console","log","localStorage","setItem","JSON","stringify","id","uid","ids","catch","err","errorCode","code","errorMessage","message","onBack","textAlign","target","value"],"sources":["C:/Users/liranhaim/Desktop/MotoProg_H/src/components/auth/Signup.js"],"sourcesContent":["import React, { useState } from \"react\";\nimport { NavLink, Redirect, useNavigate } from \"react-router-dom\";\nimport { createUserWithEmailAndPassword } from \"firebase/auth\";\nimport { auth } from \"../../firebase\";\nimport { addUser } from \"../../features/users\";\nimport { useDispatch } from \"react-redux\";\n\nconst Signup = (props) => {\n  const [email, setEmail] = useState(\"\");\n  const [password, setPassword] = useState(\"\");\n  const [error, setError] = useState({});\n  const navigate = useNavigate()\n\n  const dispatch = useDispatch();\n  const onSubmit = async (e) => {\n    e.preventDefault();\n\n    await createUserWithEmailAndPassword(auth, email, password)\n      .then((userCredential) => {\n        // Signed in\n        const user = userCredential.user;\n        console.log(user);\n        // Redirect(\"/login\")\n        navigate(\"/\");\n        localStorage.setItem('user', JSON.stringify({id:userCredential.user.uid, email: email, ids: []}))\n        // ...\n        dispatch(addUser({ email: email, uid: userCredential.user.uid }));\n      })\n      .catch((err) => {\n        const errorCode = err.code;\n        const errorMessage = err.message;\n        if (errorMessage === \"Firebase: Error (auth/email-already-in-use).\") {\n          setError({ email: \"This email is already exist\" });\n        } else if (\n          errorMessage ===\n          \"Firebase: Password should be at least 6 characters (auth/weak-password).\"\n        ) {\n          setError({ password: \"Password should be at least 6 characters\" });\n        }\n        console.log(errorMessage);\n        // ..\n      });\n  };\n\n  const onBack = (e) => {\n    e.preventDefault()\n    navigate(\"/\")\n  }\n\n  return (\n    <main className=\"auth\">\n      <div className=\"bg-blur\" />\n      <section>\n        <div style={{ textAlign: \"center\" }}>\n          <span className=\"mdi mdi-cube-outline cube\"></span>\n        </div>\n        <div>\n          <h1>Sign up</h1>\n          <form onSubmit={onSubmit}>\n            <div className=\"input-container\">\n              <input\n                className=\"input-form\"\n                type=\"email\"\n                label=\"Email address\"\n                value={email}\n                onChange={(e) => setEmail(e.target.value)}\n                required\n                placeholder=\"Email address\"\n              />\n            </div>\n            {error.email ? <p className=\"error\">{error.email}</p> : null}\n\n            <div className=\"input-container\">\n              <input\n                className=\"input-form\"\n                type=\"password\"\n                label=\"Create password\"\n                value={password}\n                onChange={(e) => setPassword(e.target.value)}\n                required\n                placeholder=\"Password\"\n              />\n            </div>\n            {error.password ? <p className=\"error\">{error.password}</p> : null}\n\n            <div className=\"submit\">\n              <button type=\"submit\" className=\"submit-button\">\n                Sign up\n              </button>\n            </div>\n          </form>\n\n          <p className=\"text-white text-center\">\n            Already have an account? <NavLink to=\"/login\">Sign in</NavLink>\n          </p>\n          <p className=\"back\" onClick={onBack}>\n            Back\n          </p>\n        </div>\n      </section>\n    </main>\n  );\n};\n\nexport default Signup;\n"],"mappings":"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"},"metadata":{},"sourceType":"module","externalDependencies":[]}