{"ast":null,"code":"import _regeneratorRuntime from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/regeneratorRuntime.js\";import _asyncToGenerator from\"C:/Users/liranhaim/Desktop/MotoProg_H/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\";import{getDoc,setDoc,doc,updateDoc,addDoc,orderBy,query,where,getDocs,collection,CollectionReference,arrayUnion}from\"firebase/firestore\";import{firestore}from\"../firebase\";export var getHistory=/*#__PURE__*/function(){var _ref=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee(userId){var q,querySnapshot,history;return _regeneratorRuntime().wrap(function _callee$(_context){while(1)switch(_context.prev=_context.next){case 0:_context.prev=0;// Create a query to retrieve the history records for the specified user\nq=query(collection(firestore,\"history\"),where(\"userId\",\"==\",userId));// Execute the query and get a snapshot of the results\n_context.next=4;return getDocs(q);case 4:querySnapshot=_context.sent;// Extract the data from each history record and return as an array\nhistory=querySnapshot.docs.map(function(doc){return doc.data();});return _context.abrupt(\"return\",history);case 9:_context.prev=9;_context.t0=_context[\"catch\"](0);console.error(\"Error getting history:\",_context.t0);case 12:case\"end\":return _context.stop();}},_callee,null,[[0,9]]);}));return function getHistory(_x){return _ref.apply(this,arguments);};}();export var addHistory=/*#__PURE__*/function(){var _ref2=_asyncToGenerator(/*#__PURE__*/_regeneratorRuntime().mark(function _callee2(userId,date,category,score,correctCount,wrongCount,userRate,globalRate,hints50Count,hintsCount){var data;return _regeneratorRuntime().wrap(function _callee2$(_context2){while(1)switch(_context2.prev=_context2.next){case 0:data={userId:userId,date:date,category:category,score:score,correctCount:correctCount,wrongCount:wrongCount,userRate:userRate,globalRate:globalRate,hints50Count:hints50Count,hintsCount:hintsCount};_context2.next=3;return addDoc(collection(firestore,\"history\"),data);case 3:case\"end\":return _context2.stop();}},_callee2);}));return function addHistory(_x2,_x3,_x4,_x5,_x6,_x7,_x8,_x9,_x10,_x11){return _ref2.apply(this,arguments);};}();","map":{"version":3,"names":["getDoc","setDoc","doc","updateDoc","addDoc","orderBy","query","where","getDocs","collection","CollectionReference","arrayUnion","firestore","getHistory","userId","q","querySnapshot","history","docs","map","data","console","error","addHistory","date","category","score","correctCount","wrongCount","userRate","globalRate","hints50Count","hintsCount"],"sources":["C:/Users/liranhaim/Desktop/MotoProg_H/src/features/history.js"],"sourcesContent":["import {\n  getDoc,\n  setDoc,\n  doc,\n  updateDoc,\n  addDoc,\n  orderBy,\n  query,\n  where,\n  getDocs,\n  collection,\n  CollectionReference,\n  arrayUnion,\n} from \"firebase/firestore\";\nimport { firestore } from \"../firebase\";\n\nexport const getHistory = async (userId) => {\n  try {\n    // Create a query to retrieve the history records for the specified user\n    const q = query(\n      collection(firestore, \"history\"),\n      where(\"userId\", \"==\", userId)\n    );\n\n    // Execute the query and get a snapshot of the results\n    const querySnapshot = await getDocs(q);\n\n    // Extract the data from each history record and return as an array\n    const history = querySnapshot.docs.map((doc) => doc.data());\n\n    return history;\n  } catch (error) {\n    console.error(\"Error getting history:\", error);\n  }\n};\n\nexport const addHistory = async (\n  userId,\n  date,\n  category,\n  score,\n  correctCount,\n  wrongCount,\n  userRate,\n  globalRate,\n  hints50Count,\n  hintsCount\n) => {\n  const data = {\n    userId,\n    date,\n    category,\n    score,\n    correctCount,\n    wrongCount,\n    userRate,\n    globalRate,\n    hints50Count,\n    hintsCount,\n  };\n\n  await addDoc(collection(firestore, \"history\"), data);\n};\n"],"mappings":"sQAAA,OACEA,MAAM,CACNC,MAAM,CACNC,GAAG,CACHC,SAAS,CACTC,MAAM,CACNC,OAAO,CACPC,KAAK,CACLC,KAAK,CACLC,OAAO,CACPC,UAAU,CACVC,mBAAmB,CACnBC,UAAU,KACL,oBAAoB,CAC3B,OAASC,SAAS,KAAQ,aAAa,CAEvC,MAAO,IAAMC,WAAU,4FAAG,iBAAOC,MAAM,+JAEnC;AACMC,CAAC,CAAGT,KAAK,CACbG,UAAU,CAACG,SAAS,CAAE,SAAS,CAAC,CAChCL,KAAK,CAAC,QAAQ,CAAE,IAAI,CAAEO,MAAM,CAAC,CAC9B,CAED;AAAA,sBAC4BN,QAAO,CAACO,CAAC,CAAC,QAAhCC,aAAa,eAEnB;AACMC,OAAO,CAAGD,aAAa,CAACE,IAAI,CAACC,GAAG,CAAC,SAACjB,GAAG,QAAKA,IAAG,CAACkB,IAAI,EAAE,GAAC,iCAEpDH,OAAO,0DAEdI,OAAO,CAACC,KAAK,CAAC,wBAAwB,aAAQ,CAAC,mEAElD,kBAlBYT,WAAU,4CAkBtB,CAED,MAAO,IAAMU,WAAU,6FAAG,kBACxBT,MAAM,CACNU,IAAI,CACJC,QAAQ,CACRC,KAAK,CACLC,YAAY,CACZC,UAAU,CACVC,QAAQ,CACRC,UAAU,CACVC,YAAY,CACZC,UAAU,gIAEJZ,IAAI,CAAG,CACXN,MAAM,CAANA,MAAM,CACNU,IAAI,CAAJA,IAAI,CACJC,QAAQ,CAARA,QAAQ,CACRC,KAAK,CAALA,KAAK,CACLC,YAAY,CAAZA,YAAY,CACZC,UAAU,CAAVA,UAAU,CACVC,QAAQ,CAARA,QAAQ,CACRC,UAAU,CAAVA,UAAU,CACVC,YAAY,CAAZA,YAAY,CACZC,UAAU,CAAVA,UACF,CAAC,wBAEK5B,OAAM,CAACK,UAAU,CAACG,SAAS,CAAE,SAAS,CAAC,CAAEQ,IAAI,CAAC,wDACrD,kBA1BYG,WAAU,oFA0BtB"},"metadata":{},"sourceType":"module","externalDependencies":[]}